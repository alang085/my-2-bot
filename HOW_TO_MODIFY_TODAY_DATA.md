# 如何修改今天的数据

## 📋 使用管理员数据修正功能

### 快速开始

1. **查看今天的操作记录**
   ```
   /admin_correct list
   ```
   或指定日期：
   ```
   /admin_correct list 2025-01-15
   ```

2. **查看具体操作详情**
   ```
   /admin_correct view <操作ID>
   ```
   示例：
   ```
   /admin_correct view 123
   ```

3. **修改操作数据**
   ```
   /admin_correct modify <操作ID>
   ```
   然后按照提示输入新的 JSON 数据

4. **删除操作记录**
   ```
   /admin_correct delete <操作ID>
   ```
   然后回复 '确认删除' 以确认

---

## 📝 详细步骤

### 步骤 1: 查看今天的操作记录

**命令**：
```
/admin_correct list
```

**功能**：
- 显示今天的所有操作记录
- 显示操作ID、类型、金额、时间、用户等信息
- 提供"查看"和"删除"按钮

**筛选选项**：
```
/admin_correct list [日期] [用户ID] [操作类型]
```

**示例**：
```
# 查看今天的所有记录
/admin_correct list

# 查看指定日期的记录
/admin_correct list 2025-01-15

# 查看指定用户今天的记录
/admin_correct list 2025-01-15 123456789

# 查看指定类型今天的记录
/admin_correct list 2025-01-15 123456789 interest
```

### 步骤 2: 查看操作详情

**命令**：
```
/admin_correct view <操作ID>
```

**功能**：
- 显示操作的完整信息
- 包括操作类型、数据、时间、用户等

**示例**：
```
/admin_correct view 123
```

### 步骤 3: 修改操作数据

**命令**：
```
/admin_correct modify <操作ID>
```

**步骤**：
1. 运行命令后，机器人会显示当前操作数据
2. 按照提示输入新的 JSON 格式数据
3. 输入 `cancel` 可以取消修改

**JSON 格式示例**：
```json
{"amount": 1000, "group_id": "S01", "note": "修改后的备注"}
```

**完整流程**：
```
1. /admin_correct modify 123
2. 机器人显示当前数据
3. 输入新的 JSON 数据：{"amount": 2000}
4. 修改完成
```

### 步骤 4: 删除操作记录

**命令**：
```
/admin_correct delete <操作ID>
```

**步骤**：
1. 运行命令后，机器人会显示确认信息
2. 回复 `确认删除` 或 `confirm` 或 `yes` 以确认
3. 删除后会自动回滚相关统计数据

**完整流程**：
```
1. /admin_correct delete 123
2. 机器人显示确认信息
3. 回复：确认删除
4. 删除完成，统计数据已回滚
```

---

## 🔍 常见操作类型

### 修改金额操作

如果今天记录了一笔错误的金额：

```
1. /admin_correct list
   找到错误的操作记录，记住操作ID（例如：123）

2. /admin_correct modify 123
   输入新的金额数据：
   {"amount": 2000}
```

### 修改订单关联

如果操作关联了错误的订单：

```
1. /admin_correct modify 123
   输入新的数据：
   {"order_id": "0001", "group_id": "S01"}
```

### 删除错误操作

如果今天记录了完全错误的操作：

```
1. /admin_correct delete 123
2. 回复：确认删除
   系统会自动：
   - 删除操作记录
   - 回滚相关统计数据
   - 记录删除操作日志
```

---

## ⚠️ 注意事项

1. **权限要求**：仅管理员可以使用此功能
2. **数据影响**：修改操作数据会影响统计数据，请谨慎操作
3. **删除操作**：删除操作会回滚统计数据，但不会自动修复所有相关数据
4. **建议流程**：
   - 先查看操作详情确认
   - 修改后检查统计数据是否正确
   - 如有必要，使用 `/fix_statistics` 修复统计数据

---

## 🔧 其他修复工具

### 修复统计数据
```
/fix_statistics
```
修复订单统计数据不一致问题

### 修复收入统计
```
/fix_income_statistics
```
修复收入统计数据不一致问题

### 检查数据不一致
```
/check_mismatch [日期]
```
检查收入明细和统计数据的不一致

---

## 📞 使用示例

### 示例 1: 修改今天的利息金额

```
用户: /admin_correct list
机器人: 显示今天的操作记录列表

用户: /admin_correct modify 123
机器人: 显示当前操作数据，提示输入新数据

用户: {"amount": 1500, "note": "修正后的利息"}
机器人: ✅ 操作数据已修改
```

### 示例 2: 删除今天的错误操作

```
用户: /admin_correct delete 123
机器人: 显示确认信息

用户: 确认删除
机器人: ✅ 操作记录已删除，统计数据已回滚
```

---

**提示**：所有修改操作都会记录在操作历史中，可以追踪修改记录。

