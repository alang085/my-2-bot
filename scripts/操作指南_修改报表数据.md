# ğŸ“– ä¿®æ”¹æŠ¥è¡¨æ•°æ® - æ“ä½œæŒ‡å—

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šæ‰¾åˆ°æ•°æ®åº“æ–‡ä»¶

æ•°æ®åº“æ–‡ä»¶ä½ç½®å–å†³äºä½ çš„éƒ¨ç½²æ–¹å¼ï¼š

#### æ–¹å¼1ï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒ
- æ•°æ®åº“æ–‡ä»¶åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼š`loan_bot.db`
- ç›´æ¥è¿è¡Œè„šæœ¬å³å¯

#### æ–¹å¼2ï¼šZeabur/ç”Ÿäº§ç¯å¢ƒ
- æ•°æ®åº“æ–‡ä»¶åœ¨ Volume æŒ‚è½½çš„ `/data` ç›®å½•
- éœ€è¦å…ˆä¸‹è½½æ•°æ®åº“æ–‡ä»¶ï¼Œæˆ–é€šè¿‡ SSH è¿æ¥åˆ°æœåŠ¡å™¨

**å¦‚ä½•æ‰¾åˆ°æ•°æ®åº“æ–‡ä»¶ï¼š**
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æŸ¥æ‰¾
dir loan_bot.db

# æˆ–ä½¿ç”¨å®Œæ•´è·¯å¾„
dir C:\Users\zhuanqian\Desktop\01_é¡¹ç›®ä»£ç \loan005.bot\loan_bot.db
```

### ç¬¬äºŒæ­¥ï¼šè¿è¡Œä¿®æ”¹è„šæœ¬

#### Windows ç³»ç»Ÿï¼ˆæ¨èï¼‰

**æ–¹æ³•1ï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰**

1. æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰æˆ– PowerShell
2. è¿›å…¥é¡¹ç›®ç›®å½•ï¼š
   ```cmd
   cd C:\Users\zhuanqian\Desktop\01_é¡¹ç›®ä»£ç \loan005.bot
   ```
3. è¿è¡Œè„šæœ¬ï¼š
   ```cmd
   scripts\modify_report_data.bat --type financial --show
   ```

**æ–¹æ³•2ï¼šç›´æ¥ä½¿ç”¨ Python**

```cmd
python scripts\modify_report_data.py --type financial --show
```

---

## ğŸ“ å¸¸ç”¨æ“ä½œç¤ºä¾‹

### ç¤ºä¾‹1ï¼šæŸ¥çœ‹å½“å‰æ•°æ®

**æŸ¥çœ‹å…¨å±€è´¢åŠ¡æ•°æ®ï¼š**
```cmd
scripts\modify_report_data.bat --type financial --show
```

**æŸ¥çœ‹å½’å±ID S01 çš„æ•°æ®ï¼š**
```cmd
scripts\modify_report_data.bat --type grouped --group_id S01 --show
```

**æŸ¥çœ‹æŸæ—¥çš„æ—¥ç»“æ•°æ®ï¼š**
```cmd
scripts\modify_report_data.bat --type daily --date 2025-01-15 --show
```

### ç¤ºä¾‹2ï¼šä¿®æ”¹å…¨å±€æ´»åŠ¨èµ„é‡‘

**è®¾ç½®ä¸º 100000ï¼š**
```cmd
scripts\modify_report_data.bat --type financial --field liquid_funds --value 100000 --mode set
```

**å¢åŠ  5000ï¼š**
```cmd
scripts\modify_report_data.bat --type financial --field liquid_funds --value 5000 --mode add
```

**å‡å°‘ 3000ï¼š**
```cmd
scripts\modify_report_data.bat --type financial --field liquid_funds --value 3000 --mode subtract
```

### ç¤ºä¾‹3ï¼šä¿®æ”¹å½’å±IDçš„åˆ©æ¯æ”¶å…¥

**æŸ¥çœ‹å½“å‰å€¼ï¼š**
```cmd
scripts\modify_report_data.bat --type grouped --group_id S01 --show
```

**å¢åŠ  5000ï¼š**
```cmd
scripts\modify_report_data.bat --type grouped --group_id S01 --field interest --value 5000 --mode add
```

**è®¾ç½®ä¸º 10000ï¼š**
```cmd
scripts\modify_report_data.bat --type grouped --group_id S01 --field interest --value 10000 --mode set
```

### ç¤ºä¾‹4ï¼šä¿®æ”¹æŸæ—¥çš„æ—¥ç»“æ•°æ®

**æŸ¥çœ‹ 2025-01-15 çš„æ•°æ®ï¼š**
```cmd
scripts\modify_report_data.bat --type daily --date 2025-01-15 --show
```

**è®¾ç½®å…¨å±€åˆ©æ¯æ”¶å…¥ï¼š**
```cmd
scripts\modify_report_data.bat --type daily --date 2025-01-15 --field interest --value 1000 --mode set
```

**è®¾ç½®ç‰¹å®šå½’å±IDçš„åˆ©æ¯æ”¶å…¥ï¼š**
```cmd
scripts\modify_report_data.bat --type daily --date 2025-01-15 --group_id S01 --field interest --value 500 --mode set
```

**ä¿®æ”¹å¼€é”€æ•°æ®ï¼š**
```cmd
# è®¾ç½®å…¬å¸å¼€é”€
scripts\modify_report_data.bat --type daily --date 2025-01-15 --field company_expenses --value 2000 --mode set

# å¢åŠ å…¶ä»–å¼€é”€
scripts\modify_report_data.bat --type daily --date 2025-01-15 --field other_expenses --value 500 --mode add
```

---

## ğŸ”§ å¦‚æœæ•°æ®åº“ä¸åœ¨é»˜è®¤ä½ç½®

å¦‚æœæ•°æ®åº“æ–‡ä»¶åœ¨å…¶ä»–ä½ç½®ï¼Œä½¿ç”¨ `--db_path` å‚æ•°ï¼š

```cmd
python scripts\modify_report_data.py --type financial --show --db_path "D:\data\loan_bot.db"
```

---

## ğŸ“Š å¯ä¿®æ”¹çš„å­—æ®µåˆ—è¡¨

### å…¨å±€è´¢åŠ¡æ•°æ® (financial_data)

- `valid_orders` - æœ‰æ•ˆè®¢å•æ•°
- `valid_amount` - æœ‰æ•ˆè®¢å•é‡‘é¢
- `liquid_funds` - æ´»åŠ¨èµ„é‡‘ â­å¸¸ç”¨
- `new_clients` - æ–°å®¢æˆ·æ•°
- `new_clients_amount` - æ–°å®¢æˆ·é‡‘é¢
- `old_clients` - è€å®¢æˆ·æ•°
- `old_clients_amount` - è€å®¢æˆ·é‡‘é¢
- `interest` - åˆ©æ¯æ”¶å…¥ â­å¸¸ç”¨
- `completed_orders` - å®Œæˆè®¢å•æ•°
- `completed_amount` - å®Œæˆè®¢å•é‡‘é¢
- `breach_orders` - è¿çº¦è®¢å•æ•°
- `breach_amount` - è¿çº¦é‡‘é¢
- `breach_end_orders` - è¿çº¦å®Œæˆè®¢å•æ•°
- `breach_end_amount` - è¿çº¦å®Œæˆé‡‘é¢

### åˆ†ç»„è´¢åŠ¡æ•°æ® (grouped_data)

å­—æ®µä¸å…¨å±€è´¢åŠ¡æ•°æ®ç›¸åŒï¼Œä½†æŒ‰å½’å±IDåˆ†ç»„ã€‚

### æ—¥ç»“æ•°æ® (daily_data)

- `new_clients` - æ–°å®¢æˆ·æ•°
- `new_clients_amount` - æ–°å®¢æˆ·é‡‘é¢
- `old_clients` - è€å®¢æˆ·æ•°
- `old_clients_amount` - è€å®¢æˆ·é‡‘é¢
- `interest` - åˆ©æ¯æ”¶å…¥ â­å¸¸ç”¨
- `completed_orders` - å®Œæˆè®¢å•æ•°
- `completed_amount` - å®Œæˆè®¢å•é‡‘é¢
- `breach_orders` - è¿çº¦è®¢å•æ•°
- `breach_amount` - è¿çº¦é‡‘é¢
- `breach_end_orders` - è¿çº¦å®Œæˆè®¢å•æ•°
- `breach_end_amount` - è¿çº¦å®Œæˆé‡‘é¢
- `liquid_flow` - èµ„é‡‘æµé‡
- `company_expenses` - å…¬å¸å¼€é”€ â­å¸¸ç”¨
- `other_expenses` - å…¶ä»–å¼€é”€ â­å¸¸ç”¨

---

## âš ï¸ æ“ä½œæ³¨æ„äº‹é¡¹

### 1. ä¿®æ”¹å‰å…ˆæŸ¥çœ‹
```cmd
# å…ˆæŸ¥çœ‹å½“å‰å€¼
scripts\modify_report_data.bat --type financial --show

# å†ä¿®æ”¹
scripts\modify_report_data.bat --type financial --field liquid_funds --value 100000 --mode set
```

### 2. å¤‡ä»½æ•°æ®åº“ï¼ˆé‡è¦ï¼ï¼‰
ä¿®æ”¹å‰å»ºè®®å¤‡ä»½æ•°æ®åº“æ–‡ä»¶ï¼š
```cmd
copy loan_bot.db loan_bot.db.backup
```

### 3. ä¿®æ”¹æ¨¡å¼è¯´æ˜
- `set` - è®¾ç½®ä¸ºæŒ‡å®šå€¼ï¼ˆè¦†ç›–åŸå€¼ï¼‰
- `add` - å¢åŠ æŒ‡å®šå€¼ï¼ˆåœ¨åŸå€¼åŸºç¡€ä¸ŠåŠ ï¼‰
- `subtract` - å‡å°‘æŒ‡å®šå€¼ï¼ˆåœ¨åŸå€¼åŸºç¡€ä¸Šå‡ï¼‰

### 4. æœåŠ¡è¿è¡Œæ—¶çš„ä¿®æ”¹
- å¦‚æœæœåŠ¡æ­£åœ¨è¿è¡Œï¼Œä¿®æ”¹ä¼šç«‹å³ç”Ÿæ•ˆ
- å»ºè®®åœ¨ä¿®æ”¹åæ£€æŸ¥æŠ¥è¡¨æ•°æ®æ˜¯å¦æ­£ç¡®

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q1: æç¤º"æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨"
**åŸå› ï¼š** æ•°æ®åº“æ–‡ä»¶ä¸åœ¨é»˜è®¤ä½ç½®

**è§£å†³ï¼š**
1. æ‰¾åˆ°æ•°æ®åº“æ–‡ä»¶çš„å®é™…ä½ç½®
2. ä½¿ç”¨ `--db_path` å‚æ•°æŒ‡å®šè·¯å¾„ï¼š
   ```cmd
   python scripts\modify_report_data.py --type financial --show --db_path "å®é™…è·¯å¾„\loan_bot.db"
   ```

### Q2: æç¤º"å­—æ®µä¸å­˜åœ¨"
**åŸå› ï¼š** å­—æ®µåæ‹¼å†™é”™è¯¯

**è§£å†³ï¼š**
1. å…ˆä½¿ç”¨ `--show` æŸ¥çœ‹å¯ç”¨å­—æ®µ
2. æ£€æŸ¥å­—æ®µåæ‹¼å†™æ˜¯å¦æ­£ç¡®

### Q3: ä¿®æ”¹åæ•°æ®æ²¡æœ‰å˜åŒ–
**åŸå› ï¼š** å¯èƒ½ä¿®æ”¹äº†é”™è¯¯çš„è¡¨æˆ–è®°å½•

**è§£å†³ï¼š**
1. ç¡®è®¤ä¿®æ”¹çš„ç±»å‹æ­£ç¡®ï¼ˆfinancial/grouped/dailyï¼‰
2. ç¡®è®¤æ—¥æœŸæ ¼å¼æ­£ç¡®ï¼ˆYYYY-MM-DDï¼‰
3. ç¡®è®¤å½’å±IDæ­£ç¡®
4. ä¿®æ”¹åå†æ¬¡æŸ¥çœ‹ç¡®è®¤

---

## ğŸ“ å®Œæ•´å‘½ä»¤å‚è€ƒ

```cmd
# æŸ¥çœ‹å¸®åŠ©
python scripts\modify_report_data.py --help

# æŸ¥çœ‹å…¨å±€æ•°æ®
scripts\modify_report_data.bat --type financial --show

# æŸ¥çœ‹åˆ†ç»„æ•°æ®
scripts\modify_report_data.bat --type grouped --group_id S01 --show

# æŸ¥çœ‹æ—¥ç»“æ•°æ®
scripts\modify_report_data.bat --type daily --date 2025-01-15 --show

# ä¿®æ”¹å…¨å±€æ•°æ®ï¼ˆè®¾ç½®å€¼ï¼‰
scripts\modify_report_data.bat --type financial --field liquid_funds --value 100000 --mode set

# ä¿®æ”¹å…¨å±€æ•°æ®ï¼ˆå¢åŠ å€¼ï¼‰
scripts\modify_report_data.bat --type financial --field interest --value 5000 --mode add

# ä¿®æ”¹åˆ†ç»„æ•°æ®
scripts\modify_report_data.bat --type grouped --group_id S01 --field interest --value 5000 --mode add

# ä¿®æ”¹æ—¥ç»“æ•°æ®
scripts\modify_report_data.bat --type daily --date 2025-01-15 --field interest --value 1000 --mode set

# æŒ‡å®šæ•°æ®åº“è·¯å¾„
python scripts\modify_report_data.py --type financial --show --db_path "D:\data\loan_bot.db"
```

---

## âœ… æ“ä½œæ£€æŸ¥æ¸…å•

ä¿®æ”¹æ•°æ®å‰ï¼š
- [ ] å·²å¤‡ä»½æ•°æ®åº“æ–‡ä»¶
- [ ] å·²æŸ¥çœ‹å½“å‰æ•°æ®å€¼
- [ ] å·²ç¡®è®¤è¦ä¿®æ”¹çš„å­—æ®µå
- [ ] å·²ç¡®è®¤ä¿®æ”¹æ¨¡å¼å’Œæ•°å€¼

ä¿®æ”¹æ•°æ®åï¼š
- [ ] å·²æŸ¥çœ‹ä¿®æ”¹åçš„æ•°æ®
- [ ] å·²ç¡®è®¤æ•°å€¼æ­£ç¡®
- [ ] å·²æ£€æŸ¥ç›¸å…³æŠ¥è¡¨æ•°æ®

---

**æç¤ºï¼š** å¦‚æœ‰é—®é¢˜ï¼Œè¿è¡Œ `python scripts\modify_report_data.py --help` æŸ¥çœ‹è¯¦ç»†å¸®åŠ©ã€‚





