# 机器人功能测试清单

## 🚀 启动状态

### 启动检查
- [x] 机器人进程运行中
- [x] 数据库初始化成功
- [x] Telegram连接成功
- [x] 调度器启动成功

### 日志检查
- [x] 无严重错误
- [x] 启动信息正常
- [ ] 消息处理正常（需要实际测试）

## 📋 基础命令测试

### 1. `/start` 命令
**测试步骤**:
1. 在 Telegram 私聊中发送 `/start`
2. 检查是否收到欢迎消息
3. 检查是否显示命令帮助

**预期结果**:
- ✅ 收到欢迎消息
- ✅ 显示命令列表
- ✅ 显示内联键盘（如果有）

**测试状态**: ⏳ 待测试

---

### 2. `/report` 命令
**测试步骤**:
1. 在 Telegram 私聊中发送 `/report`
2. 检查是否收到报表消息
3. 检查报表内容是否正确

**预期结果**:
- ✅ 收到报表消息
- ✅ 报表数据正确
- ✅ 可以查看详细报表

**测试状态**: ⏳ 待测试

---

### 3. `/search` 命令
**测试步骤**:
1. 在 Telegram 私聊中发送 `/search`
2. 检查是否显示搜索菜单
3. 测试不同搜索方式

**预期结果**:
- ✅ 显示搜索菜单
- ✅ 可以按状态搜索
- ✅ 可以按归属ID搜索
- ✅ 可以按星期分组搜索

**测试状态**: ⏳ 待测试

---

### 4. `/valid_amount` 命令
**测试步骤**:
1. 在 Telegram 私聊中发送 `/valid_amount`
2. 检查是否显示有效金额统计

**预期结果**:
- ✅ 显示有效金额统计
- ✅ 数据准确

**测试状态**: ⏳ 待测试

---

### 5. `/myreport` 命令
**测试步骤**:
1. 在 Telegram 私聊中发送 `/myreport`
2. 检查是否显示个人报表

**预期结果**:
- ✅ 显示个人报表
- ✅ 数据正确

**测试状态**: ⏳ 待测试

---

### 6. `/ordertable` 命令
**测试步骤**:
1. 在 Telegram 私聊中发送 `/ordertable`
2. 检查是否生成Excel文件
3. 检查是否发送文件

**预期结果**:
- ✅ 生成Excel文件
- ✅ 发送文件成功
- ✅ 文件内容正确

**测试状态**: ⏳ 待测试

## 🔄 群组功能测试

### 群名变更
**测试步骤**:
1. 在群组中修改群名
2. 检查机器人是否自动处理

**预期结果**:
- ✅ 自动检测群名变更
- ✅ 自动创建或更新订单
- ✅ 日志记录正常

**测试状态**: ⏳ 待测试

### 新成员入群
**测试步骤**:
1. 添加新成员到群组
2. 检查机器人是否发送欢迎消息

**预期结果**:
- ✅ 检测到新成员
- ✅ 发送欢迎消息（如果配置）

**测试状态**: ⏳ 待测试

## 📊 日志监控要点

### 正常日志
- ✅ `机器人启动成功，等待消息...`
- ✅ `Scheduler started`
- ✅ 消息处理日志

### 警告日志
- ⚠️ 网络连接警告（临时性）
- ⚠️ 权限检查警告

### 错误日志
- ❌ `Conflict: terminated by other getUpdates request` - 多个实例运行
- ❌ `NetworkError` - 网络连接问题
- ❌ `DatabaseError` - 数据库错误

## 🔍 问题排查

### 如果机器人无响应
1. 检查进程是否运行: `ps aux | grep "python3 main.py"`
2. 查看日志: `tail -f bot_runtime.log`
3. 检查配置: 确认 BOT_TOKEN 和 ADMIN_IDS 正确
4. 检查网络: 确认可以访问 Telegram API

### 如果命令无响应
1. 检查用户权限: 确认用户已授权
2. 查看日志: 查找错误信息
3. 检查命令格式: 确认命令正确

### 如果出现冲突错误
1. 停止所有实例: `pkill -f "python3 main.py"`
2. 等待几秒
3. 重新启动: `python3 main.py`

## 📝 测试记录

### 测试日期: ___________

### 测试结果:
- [ ] 所有基础命令正常
- [ ] 群组功能正常
- [ ] 无严重错误
- [ ] 性能正常

### 发现的问题:
1. 
2. 
3. 

### 备注:
___________________________________________________

